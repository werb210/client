Client App → questions for your Replit agent

Please answer with file paths + code excerpts + console outputs. No sensitive values; keys and shapes only.

Submit path & payload builder

What file/function constructs the final API payload for Submit Application? (e.g., src/services/submitApplication.ts)

Paste the exact payload object you send (keys only; replace values with placeholders).

Paste the fetch/axios call including URL (should use VITE_STAFF_API_BASE).

Full form object at submit time (the “48 fields”)

Where is the canonical form state held just before submit (store/context/hook)?

Paste a Object.keys(formState) dump (or a hand-written list) showing all keys and nesting (e.g., applicant.firstName, etc.).

If nested, show the shape (a short JSON with empty strings/0/[] to indicate structure).

Step→state mapping (where fields are set)

For Step 1–4, paste the code lines that write into the form state (the setters or reducers).

Example: dispatch({type:'SET', path:'business.legalName', value }) or setForm(s=>({...s, legalName })).

Confirm if any step transforms or renames keys (e.g., amount→fundingAmount).

Product selection mapping (Step 2)

Paste the code that sets selectedCategory, selectedProductId/Name, selectedLenderName.

Confirm if/where these are copied into the submit payload (product_id, product_category, etc.).

Years/months in business; revenue

Show where years_in_business vs time_in_business_months are computed or stored.

Show where annual_revenue vs monthly_revenue are computed or stored.

If only one exists, confirm the other is derived (and show the derivation site).

Contact fields (name/email/phone)

Do you send contact_name as a single string or combine first+last at submit? Paste that logic.

Confirm exact keys for applicant address (line1/city/state/postal).

Documents & signature

How are uploadedDocuments represented at submit time? Paste the shape (keys only), e.g. [{type, name, s3_key/url, size}].

Confirm if documents are sent with the create payload (documents: [...]) or via separate upload calls. Show code.

API base + CORS

Paste VITE_STAFF_API_BASE from .env and where it’s read in code.

Confirm request options: credentials: 'include'? any custom headers that might affect body parsing?

Console trace for one submission (keys only)

Instrument the submit function to log:
a) Object.keys(formState) (or a deep-keys helper) just before submit
b) Object.keys(payload) you actually send

Paste the two key lists (no values). If possible also log nested keys (e.g., business.legalName).

Known drops/filters

Search the codebase for any pick()/omit()/toJSON() or manual mapping that could drop fields.

Run: rg -n "(pick|omit|toJSON|whitelist|blacklist|sanitize)" src | sort and paste relevant snippets.

Error/output from server on submit

Paste the status code and any response body from the create call. If the server echoes back the created application JSON, paste just the top-level keys it returns.

Future FLINKS fields (if present now)

If any FLINKS-related keys already exist in state (flinks.*, bank.*), list them and whether they’re included in the submit payload today.