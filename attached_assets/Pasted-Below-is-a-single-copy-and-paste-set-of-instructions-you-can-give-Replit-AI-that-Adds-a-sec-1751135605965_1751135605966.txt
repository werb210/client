Below is a **single, copy-and-paste set of instructions you can give Replit AI** that:

* Adds a secure **e-mail + password + SMS-OTP** login system to the **Client Application**
* Uses the **existing staff-side `/api/auth/*` endpoints** (Option A)
* Includes **registration**, **login**, **OTP verify**, **password-reset**, routing guards, and all fetch helpers
* Leaves the Staff code unchanged (it already supports those endpoints)

> **Send this whole block to Replit in the Client project.**
> Replit AI will scaffold the pages, hooks, routes, and build-ready code exactly as written.

---

````txt
#############################################
#  BOREAL FINANCIAL â€“ CLIENT AUTH UP-GRADE  #
#############################################

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  ğŸ”¸  OBJECTIVE                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
Implement email + password login with SMS-OTP
(for 2-factor) and a full password-reset flow.
After authentication the user lands on Step 1
of the 7-step funding application.

Staff backend base-URL:
    https://staffportal.replit.app/api

All requests must use  credentials:"include"  and
mode:"cors".

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”¹  TASK LIST  (execute in order, stop after each
    task and report â€œdone / waitingâ€)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1ï¸âƒ£  Pages & Routing
    â–¸ Create these pages under  src/pages/ :
        â€¢ Login.tsx
        â€¢ Register.tsx
        â€¢ VerifyOtp.tsx
        â€¢ RequestReset.tsx
        â€¢ ResetPassword.tsx
    â–¸ Update router ( src/routes.tsx or Wouter hook )
      â€“ Public routes   : /login  /register  /verify-otp
                          /request-reset  /reset-password/:token
      â€“ Protected routes: /* everything else
    â–¸ Add <AuthGuard> wrapper that redirects 401â†’/login.

2ï¸âƒ£  API Helper  ( src/lib/authApi.ts )
    ```ts
    import { API_BASE_URL } from './constants';

    export async function apiFetch(path:string, options:RequestInit={}) {
      return fetch(`${API_BASE_URL}${path}`, {
        ...options,
        credentials: 'include',
        mode: 'cors',
        headers: {
          'Content-Type': 'application/json',
          ...(options.headers || {})
        }
      });
    }
    export const AuthAPI = {
      login:  (body) => apiFetch('/auth/login',   {method:'POST',body:JSON.stringify(body)}),
      register:(body) => apiFetch('/auth/register',{method:'POST',body:JSON.stringify(body)}),
      verifyOtp:(body)=> apiFetch('/auth/verify-otp',{method:'POST',body:JSON.stringify(body)}),
      me:      ()     => apiFetch('/auth/user',{method:'GET'}),
      logout:  ()     => apiFetch('/auth/logout',{method:'GET'}),
      requestReset:(body)=> apiFetch('/auth/request-reset',{method:'POST',body:JSON.stringify(body)}),
      resetPassword:(body)=>apiFetch('/auth/reset-password',{method:'POST',body:JSON.stringify(body)}),
    };
    ```

3ï¸âƒ£  Login Page ( src/pages/Login.tsx )
    â€¢ email + password   (react-hook-form + Zod)
    â€¢ POST AuthAPI.login â†’ if `{ otpRequired:true }`
                           route â†’ /verify-otp
    â€¢ On success w/out OTP â‡’ route â†’ /step1

4ï¸âƒ£  Register Page ( src/pages/Register.tsx )
    â€¢ email, password, confirm, phone
    â€¢ POST AuthAPI.register
    â€¢ then same flow as login (otpRequired)

5ï¸âƒ£  Verify OTP Page ( src/pages/VerifyOtp.tsx )
    â€¢ 6-digit code input
    â€¢ POST AuthAPI.verifyOtp
    â€¢ On 200 â‡’ route  /step1
    â€¢ On error â‡’ toast + allow resend (call /auth/resend-otp)

6ï¸âƒ£  Forgot-Password Flow
    a) RequestReset.tsx â€“ email input â†’ POST /auth/request-reset
       show â€œCheck your e-mailâ€.
    b) ResetPassword.tsx â€“ routed as
       /reset-password/:token  (token from e-mail link)
       fields: newPassword, confirm â†’ POST /auth/reset-password

7ï¸âƒ£  Auth Context  ( src/context/AuthContext.tsx )
    â€¢ Holds  user  (id,email,role)  or null
    â€¢ On app boot, call  AuthAPI.me()
    â€¢ Provide  login, logout helpers

8ï¸âƒ£  Protect All Application Routes
    â€¢ Wrap <AppRouter> in <AuthGuard>
    â€¢ <AuthGuard> waits for AuthContext state;
      if null â†’ <Navigate to="/login" />

9ï¸âƒ£  ENV
    â€¢ Ensure  .env  and  .env.production :
      VITE_API_BASE_URL=https://staffportal.replit.app/api

ğŸ”¸  SECURITY NOTES
    â€¢ Always  credentials:'include'
    â€¢ Staff backend already sets cookie with  SameSite=None; Secure
    â€¢ All fetches expect JSON; if res.status===401  â†’ logout+redirect

ğŸ”¸  TESTS
    â€¢ Update /test-connection page:
        â€“ test /auth/user (should return 401 when not logged in)
        â€“ run login, then /auth/user returns profile
        â€“ run full 7-step flow after login: should succeed
    â€¢ Use Twilio test numbers to verify OTP.

ğŸ”¸  REPORT
    After each numbered task, output:
       { task: X, status: "done" }
    Then wait for my next instruction.
#############################################
````

Hand this block to Replit AI inside the **Client** project.
Replit will:

1. Scaffold all pages/components.
2. Wire up routing + context.
3. Use the staff backend for login, OTP verify, reset.
4. Stop after each task awaiting your confirmation.

Once Replit finishes tasks **1â€“9** youâ€™ll have a fully operational, secure login / registration / 2FA system gating the entire 7-step funding application.
