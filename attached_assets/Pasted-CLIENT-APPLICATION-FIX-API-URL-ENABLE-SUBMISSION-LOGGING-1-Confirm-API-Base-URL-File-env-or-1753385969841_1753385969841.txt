CLIENT APPLICATION â€” FIX API URL & ENABLE SUBMISSION LOGGING
âœ… 1. Confirm API Base URL
File: .env or vite.config.ts

ts
Copy
Edit
VITE_API_BASE_URL=https://staff.boreal.financial/api
ğŸ”¥ Never use https://sp.replit.com or proxy endpoints â€” they break on live deployment!

âœ… 2. Step 4 â€” Log Submission Result (Application POST)
File: client/src/routes/Step4_ApplicantInfo_Complete.tsx

ğŸ”§ Inside the final submission handler, add:

ts
Copy
Edit
console.log("ğŸ“¤ Submitting application data:", submissionData);

try {
  const response = await fetch(`${VITE_API_BASE_URL}/public/applications`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(submissionData)
  });

  if (!response.ok) {
    const text = await response.text();
    console.error("âŒ Application POST failed:", text);
    toast({
      title: "Application Error",
      description: "Could not save your application. Please try again.",
      variant: "destructive",
    });
    return;
  }

  const result = await response.json();
  console.log("âœ… Step 4 submission succeeded:", result);
  toast({
    title: "Step 4 submitted!",
    description: "Application data saved successfully...",
  });
} catch (err) {
  console.error("âŒ Application submission error:", err);
  toast({
    title: "Connection Error",
    description: "Unable to connect to the server.",
    variant: "destructive",
  });
}
âœ… 3. Step 5 â€” Confirm File Upload Success
File: client/src/components/DynamicDocumentRequirements.tsx

ğŸ”§ Inside the upload handler, add this:

ts
Copy
Edit
console.log("ğŸ“¤ Uploading file:", file.name);

const response = await fetch(`${VITE_API_BASE_URL}/public/upload/${applicationId}`, {
  method: "POST",
  body: formData
});

if (!response.ok) {
  const text = await response.text();
  console.error("âŒ File upload failed:", text);
  toast({
    title: "Upload Error",
    description: `Failed to upload ${file.name}`,
    variant: "destructive"
  });
  return;
}

console.log("âœ… File uploaded:", file.name);
âœ… 4. Step 6 â€” Finalize Submission Logs
File: client/src/routes/Step6_TypedSignature.tsx

Add this after the PATCH finalize call:

ts
Copy
Edit
console.log("ğŸ“¤ Finalizing application:", applicationId);

const response = await fetch(`${VITE_API_BASE_URL}/public/applications/${applicationId}/finalize`, {
  method: "PATCH"
});

if (!response.ok) {
  const text = await response.text();
  console.error("âŒ Finalization failed:", text);
  toast({
    title: "Finalization Error",
    description: "Something went wrong submitting your application.",
    variant: "destructive"
  });
  return;
}

console.log("âœ… Application finalized:", applicationId);
âœ… FINAL CHECKLIST
Step	Description	Expected Log
1	Client submits application	âœ… Step 4 submission succeeded
2	Client uploads documents	âœ… File uploaded: ...
3	Client finalizes submission	âœ… Application finalized: ...
4	Staff app receives full payload	âœ… Application and documents visible
5	Staff UI shows correct info	âœ… No â€œUnknown Businessâ€ or empty fields
