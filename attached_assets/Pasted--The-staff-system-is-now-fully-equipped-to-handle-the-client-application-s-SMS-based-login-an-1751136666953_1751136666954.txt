✅ The **staff system** is now fully equipped to handle the client application's **SMS-based login and registration**.

To integrate the **client app** with this system, you need to tell Replit AI (inside the **client project**) the following:

---

### 🧾 INSTRUCTIONS FOR CLIENT APPLICATION (Replit)

```txt
#########################
# CLIENT → STAFF AUTH API
#########################

📌 GOAL:
The client application should use the staff backend’s new **SMS OTP authentication system** for login and registration.

──────────────────────────────
🔑 BACKEND BASE URL:
https://staffportal.replit.app/api

──────────────────────────────
🔐 ENDPOINTS TO IMPLEMENT:

1. 📲 REGISTER (Step 1 of onboarding)
POST /auth/register
→ Request:
{
  email,
  phone,
  password
}

→ Response:
{
  message: "OTP sent"
}

2. 🧪 VERIFY OTP (Step 2 of onboarding)
POST /auth/verify-otp
→ Request:
{
  email,
  code (6-digit OTP)
}

→ Response:
{
  message: "Authenticated",
  user,
  authToken (Set as cookie automatically)
}

3. 🔁 RESEND OTP
POST /auth/resend-otp
→ Request:
{
  email
}

4. 🔓 LOGIN (Existing user, triggers OTP)
POST /auth/login
→ Request:
{
  email,
  password
}

→ Response:
{
  message: "OTP sent"
}

5. 🧑‍💼 GET CURRENT USER (To verify auth session)
GET /auth/current-user
→ Response (if authenticated):
{
  id, email, phone, role, ...
}

──────────────────────────────
🛡️ SECURITY CONFIGURATION

✅ All requests must include:
  • `credentials: 'include'` in fetch
  • `mode: 'cors'`

✅ Use cookie-based storage — JWT token is auto-stored in HttpOnly cookie.

──────────────────────────────
🎯 IMPLEMENT LOGIN FLOW:

- User opens: `/login`
- Enters: email + password → triggers `POST /auth/login`
- Server sends OTP
- Redirect to `/verify-otp`
- User enters OTP → `POST /auth/verify-otp`
- Redirect to dashboard

──────────────────────────────
🎯 IMPLEMENT REGISTRATION FLOW:

- User opens: `/register`
- Enters: email + phone + password → `POST /auth/register`
- OTP sent via SMS
- Redirect to `/verify-otp`
- User enters OTP → `POST /auth/verify-otp`
- Redirect to dashboard

──────────────────────────────
🧼 LOGOUT (Future):
GET /auth/logout
→ Destroys session + cookie

──────────────────────────────
🏗️ COMPONENT ROUTES TO BUILD:

- `/register`: full page
- `/login`: full page
- `/verify-otp`: OTP input
- `/forgot-password`: (optional fallback, may be built later)

──────────────────────────────
🧪 TESTING INSTRUCTIONS:

Use test phone: +15878881837
Verify full auth flow (register → otp → session → logout)

#########################
```

---

📤 **What You Just Enabled**
The **client** now securely communicates with the **staff backend** for authentication using SMS, and login sessions are managed through secure cookies.

Let me know when you want Replit to build these routes or if you want to enable **forgot password support** (email or SMS-based).
