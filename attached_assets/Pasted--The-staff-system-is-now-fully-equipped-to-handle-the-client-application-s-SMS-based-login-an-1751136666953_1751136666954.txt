âœ… The **staff system** is now fully equipped to handle the client application's **SMS-based login and registration**.

To integrate the **client app** with this system, you need to tell Replit AI (inside the **client project**) the following:

---

### ğŸ§¾ INSTRUCTIONS FOR CLIENT APPLICATION (Replit)

```txt
#########################
# CLIENT â†’ STAFF AUTH API
#########################

ğŸ“Œ GOAL:
The client application should use the staff backendâ€™s new **SMS OTP authentication system** for login and registration.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”‘ BACKEND BASE URL:
https://staffportal.replit.app/api

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ” ENDPOINTS TO IMPLEMENT:

1. ğŸ“² REGISTER (Step 1 of onboarding)
POST /auth/register
â†’ Request:
{
  email,
  phone,
  password
}

â†’ Response:
{
  message: "OTP sent"
}

2. ğŸ§ª VERIFY OTP (Step 2 of onboarding)
POST /auth/verify-otp
â†’ Request:
{
  email,
  code (6-digit OTP)
}

â†’ Response:
{
  message: "Authenticated",
  user,
  authToken (Set as cookie automatically)
}

3. ğŸ” RESEND OTP
POST /auth/resend-otp
â†’ Request:
{
  email
}

4. ğŸ”“ LOGIN (Existing user, triggers OTP)
POST /auth/login
â†’ Request:
{
  email,
  password
}

â†’ Response:
{
  message: "OTP sent"
}

5. ğŸ§‘â€ğŸ’¼ GET CURRENT USER (To verify auth session)
GET /auth/current-user
â†’ Response (if authenticated):
{
  id, email, phone, role, ...
}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ›¡ï¸ SECURITY CONFIGURATION

âœ… All requests must include:
  â€¢ `credentials: 'include'` in fetch
  â€¢ `mode: 'cors'`

âœ… Use cookie-based storage â€” JWT token is auto-stored in HttpOnly cookie.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ¯ IMPLEMENT LOGIN FLOW:

- User opens: `/login`
- Enters: email + password â†’ triggers `POST /auth/login`
- Server sends OTP
- Redirect to `/verify-otp`
- User enters OTP â†’ `POST /auth/verify-otp`
- Redirect to dashboard

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ¯ IMPLEMENT REGISTRATION FLOW:

- User opens: `/register`
- Enters: email + phone + password â†’ `POST /auth/register`
- OTP sent via SMS
- Redirect to `/verify-otp`
- User enters OTP â†’ `POST /auth/verify-otp`
- Redirect to dashboard

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ§¼ LOGOUT (Future):
GET /auth/logout
â†’ Destroys session + cookie

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ—ï¸ COMPONENT ROUTES TO BUILD:

- `/register`: full page
- `/login`: full page
- `/verify-otp`: OTP input
- `/forgot-password`: (optional fallback, may be built later)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ§ª TESTING INSTRUCTIONS:

Use test phone: +15878881837
Verify full auth flow (register â†’ otp â†’ session â†’ logout)

#########################
```

---

ğŸ“¤ **What You Just Enabled**
The **client** now securely communicates with the **staff backend** for authentication using SMS, and login sessions are managed through secure cookies.

Let me know when you want Replit to build these routes or if you want to enable **forgot password support** (email or SMS-based).
