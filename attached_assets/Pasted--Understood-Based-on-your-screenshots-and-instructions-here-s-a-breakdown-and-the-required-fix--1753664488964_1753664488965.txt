âœ… Understood. Based on your screenshots and instructions, here's a breakdown and the required fix:

---

### ğŸŸ  Problem Identified

When the user selects:

* **"Both Capital & Equipment"**
* And inputs valid values for both capital and equipment use (e.g., \$700K funding + \$400K equipment)

ğŸ” **Step 2 is showing â€œEquipment Financingâ€ as a standalone category**, which implies it's an **equipment-only** product â€” **this is misleading**.

---

### âœ… Desired Behavior

> If the user selects **â€œBoth Capital & Equipmentâ€**, then **Step 2 should only show products that support hybrid use** (or **both categories**), not equipment-only financing.

---

### ğŸ›  Required Fix (Client Application)

#### Replit â€“ Please apply the following changes:

#### ğŸ“ File: `useRecommendations.ts` (or wherever filtering happens)

#### âœ… Step 1: Update filtering logic

Add a conditional block like:

```ts
// ğŸš« If user selects both, exclude equipment-only products
if (purpose === 'Both Capital & Equipment') {
  if (product.category === 'Equipment Financing' && !product.supportsCapitalUse) {
    return false; // Exclude pure equipment-only products
  }
}
```

You may also add a new metadata field to each product like:

```json
{
  "category": "Equipment Financing",
  "supportsCapitalUse": true
}
```

Or in TS:

```ts
interface LenderProduct {
  category: string;
  supportsCapitalUse?: boolean;
}
```

#### âœ… Step 2: Label hybrid-capable products clearly

Update the display logic to say:

> â€œSupports capital and equipment fundingâ€ â€” to clarify the category when both uses are selected.

---

### ğŸ“‹ Are These the Only Matching Products?

Yes, based on your inputs:

| Field     | Value                    |
| --------- | ------------------------ |
| Amount    | \$700,000                |
| Equipment | \$400,000                |
| Location  | Canada                   |
| Industry  | Agriculture              |
| Revenue   | \$1Mâ€“\$5M                |
| Purpose   | Both Capital & Equipment |

Only **4 product categories** passed all filters:

1. âœ… **Equipment Financing** (4 hybrid-capable options)
2. âœ… **Purchase Order Financing**
3. âœ… **Invoice Factoring**
4. âŒ **LOC** â€” amount exceeds most caps
5. âŒ **Term Loan** â€” likely failed purpose match (needs `Working Capital`)
6. âŒ **Revenue Advance** â€” industry disqualified

âœ”ï¸ Result: 3 categories showing is correct
âŒ But **Equipment-only category should be renamed or merged** when purpose is dual

---

### âœ… Action Items

* [ ] Update filtering logic to **exclude equipment-only** when both uses are selected
* [ ] Add display indicator for **hybrid-eligible** products
* [ ] Update product metadata to reflect `supportsCapitalUse` (optional but ideal)

Would you like Replit to apply this fix now and re-run a test case for `$700K Capital + $400K Equipment` to verify?
