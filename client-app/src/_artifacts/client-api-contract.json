{
  "version": "v1",
  "endpoints": {
    "POST /api/applications": {
      "responseSchema": { "$ref": "#/$defs/PublicApplicationResponse" }
    },
    "GET /api/applications/{id}": {
      "responseSchema": { "$ref": "#/$defs/FetchApplicationResponse" }
    },
    "GET /api/applications/{id}/documents": {
      "responseSchema": { "$ref": "#/$defs/ApplicationDocumentsResponse" }
    },
    "POST /api/applications/{id}/documents": {
      "responseSchema": { "type": "object", "additionalProperties": true }
    },
    "GET /api/applications/{id}/offers": {
      "responseSchema": { "$ref": "#/$defs/ApplicationOffersResponse" }
    },
    "GET /api/applications/{id}/processing/status": {
      "responseSchema": { "$ref": "#/$defs/ProcessingStatusResponse" }
    },
    "GET /api/portal/applications/{id}": {
      "responseSchema": { "$ref": "#/$defs/PortalSubmissionStatusResponse" }
    },
    "POST /api/applications/{token}/submit": {
      "responseSchema": { "type": "object", "additionalProperties": true }
    },
    "PATCH /api/applications/{token}": {
      "responseSchema": { "type": "object", "additionalProperties": true }
    },
    "GET /api/applications/{token}/messages": {
      "responseSchema": { "$ref": "#/$defs/ClientAppMessagesResponse" }
    },
    "POST /api/applications/{token}/messages": {
      "responseSchema": { "type": "object", "additionalProperties": true }
    },
    "GET /api/applications/{token}/signnow": {
      "responseSchema": { "type": "object", "additionalProperties": true }
    }
  },
  "$defs": {
    "PublicApplicationResponse": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "id": { "type": "string" },
        "application_id": { "type": "string" },
        "applicationId": { "type": "string" },
        "token": { "type": "string" },
        "status": { "type": "string" },
        "application": { "$ref": "#/$defs/ApplicationSummary" }
      }
    },
    "ApplicationSummary": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "id": { "type": "string" },
        "applicationId": { "type": "string" },
        "stage": { "type": "string" },
        "status": { "type": "string" },
        "pipeline_stage": { "type": "string" },
        "business": { "type": "object", "additionalProperties": true },
        "business_legal_name": { "type": "string" },
        "business_name": { "type": "string" },
        "document_review_completed_at": { "type": ["string", "null"] },
        "documentReviewCompletedAt": { "type": ["string", "null"] },
        "documents_completed_at": { "type": ["string", "null"] },
        "ocr_completed_at": { "type": ["string", "null"] },
        "financial_review_completed_at": { "type": ["string", "null"] },
        "financialReviewCompletedAt": { "type": ["string", "null"] },
        "financials_completed_at": { "type": ["string", "null"] },
        "banking_completed_at": { "type": ["string", "null"] },
        "expired_at": { "type": ["string", "null"] },
        "expiredAt": { "type": ["string", "null"] }
      }
    },
    "FetchApplicationResponse": {
      "anyOf": [
        { "$ref": "#/$defs/ApplicationSummary" },
        {
          "type": "object",
          "additionalProperties": true,
          "properties": {
            "application": { "$ref": "#/$defs/ApplicationSummary" }
          },
          "required": ["application"]
        }
      ]
    },
    "ApplicationDocument": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "category": { "type": "string" },
        "document_category": { "type": "string" },
        "documentType": { "type": "string" },
        "document_type": { "type": "string" },
        "name": { "type": "string" },
        "required": { "type": "boolean" },
        "is_required": { "type": "boolean" },
        "optional": { "type": "boolean" },
        "status": { "type": "string" },
        "state": { "type": "string" },
        "document_status": { "type": "string" },
        "upload_status": { "type": "string" },
        "accepted": { "type": "boolean" },
        "rejected": { "type": "boolean" },
        "file_name": { "type": "string" },
        "uploaded_at": { "type": "string" },
        "rejection_reason": { "type": ["string", "null"] },
        "rejectionReason": { "type": ["string", "null"] },
        "reason": { "type": ["string", "null"] }
      }
    },
    "ApplicationDocumentsResponse": {
      "anyOf": [
        { "type": "array", "items": { "$ref": "#/$defs/ApplicationDocument" } },
        {
          "type": "object",
          "additionalProperties": true,
          "properties": {
            "documents": {
              "type": "array",
              "items": { "$ref": "#/$defs/ApplicationDocument" }
            },
            "document_categories": {
              "type": "array",
              "items": { "$ref": "#/$defs/ApplicationDocument" }
            }
          }
        }
      ]
    },
    "OfferTermSheet": {
      "type": "object",
      "additionalProperties": true,
      "required": ["id", "lender_name", "product_name"],
      "properties": {
        "id": { "type": "string" },
        "lender_name": { "type": "string" },
        "product_name": { "type": "string" },
        "terms": { "type": ["object", "null"], "additionalProperties": true },
        "expires_at": { "type": ["string", "null"] },
        "status": { "type": ["string", "null"] },
        "document_url": { "type": ["string", "null"] }
      }
    },
    "ApplicationOffersResponse": {
      "type": "object",
      "additionalProperties": true,
      "required": ["offers"],
      "properties": {
        "offers": { "type": "array", "items": { "$ref": "#/$defs/OfferTermSheet" } }
      }
    },
    "ProcessingCheckpoint": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "status": { "type": "string" },
        "completedAt": { "type": ["string", "null"] },
        "completed_at": { "type": ["string", "null"] },
        "receivedCount": { "type": ["number", "null"] },
        "requiredCount": { "type": ["number", "null"] },
        "statementCount": { "type": ["number", "null"] },
        "requiredStatements": { "type": ["number", "null"] },
        "received_count": { "type": ["number", "null"] },
        "required_count": { "type": ["number", "null"] }
      }
    },
    "ProcessingStatusResponse": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "documentReview": { "$ref": "#/$defs/ProcessingCheckpoint" },
        "document_review": { "$ref": "#/$defs/ProcessingCheckpoint" },
        "documents": { "$ref": "#/$defs/ProcessingCheckpoint" },
        "document_processing": { "$ref": "#/$defs/ProcessingCheckpoint" },
        "document": { "$ref": "#/$defs/ProcessingCheckpoint" },
        "financialReview": { "$ref": "#/$defs/ProcessingCheckpoint" },
        "financial_review": { "$ref": "#/$defs/ProcessingCheckpoint" },
        "financials": { "$ref": "#/$defs/ProcessingCheckpoint" },
        "financial_processing": { "$ref": "#/$defs/ProcessingCheckpoint" },
        "financial": { "$ref": "#/$defs/ProcessingCheckpoint" },
        "steps": { "type": "array", "items": { "$ref": "#/$defs/ProcessingCheckpoint" } },
        "stages": { "type": "array", "items": { "$ref": "#/$defs/ProcessingCheckpoint" } }
      }
    },
    "ClientAppMessage": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "id": { "type": "string" },
        "from": { "type": "string" },
        "text": { "type": "string" },
        "created_at": { "type": "string" },
        "createdAt": { "type": "string" }
      }
    },
    "ClientAppMessagesResponse": {
      "type": "array",
      "items": { "$ref": "#/$defs/ClientAppMessage" }
    },
    "PortalSubmission": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "id": { "type": "string" },
        "status": { "type": "string" },
        "updated_at": { "type": ["string", "null"] },
        "updatedAt": { "type": ["string", "null"] }
      }
    },
    "PortalSubmissionStatusResponse": {
      "anyOf": [
        {
          "type": "object",
          "additionalProperties": true,
          "properties": { "submission": { "$ref": "#/$defs/PortalSubmission" } }
        },
        {
          "type": "object",
          "additionalProperties": true,
          "properties": {
            "data": {
              "type": "object",
              "additionalProperties": true,
              "properties": { "submission": { "$ref": "#/$defs/PortalSubmission" } }
            }
          }
        }
      ]
    }
  }
}
